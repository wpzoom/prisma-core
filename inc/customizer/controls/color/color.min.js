!function(t){function r(t){var r;return(t=t.replace(/ /g,"")).match(/rgba\(\d+\,\d+\,\d+\,([^\)]+)\)/)?(r=100*parseFloat(t.match(/rgba\(\d+\,\d+\,\d+\,([^\)]+)\)/)[1]).toFixed(2),r=parseInt(r)):r=100,r}function a(t,r,a,i){var e,n,o;e=r.data("a8cIris"),n=r.data("wpWpColorPicker"),e._color._alpha=t,o=e._color.toString(),r.val(o),n.toggler.css({"background-color":o}),i&&sinatraupdate_alpha_value_on_alpha_slider(t,a),r.trigger("color-updated")}function i(t,r){r.slider("value",t),r.find(".ui-slider-handle").text(t.toString())}wp.customize.controlConstructor["sinatra-color"]=wp.customize.Control.extend({ready:function(){"use strict";var r=this,a=r.setting.get();r.container.on("color-updated",".sinatra-color-control",function(){value=t(this).val(),value!==a&&(r.setting.set(value),a=value)})}}),Color.prototype.toString=function(t){if("no-alpha"==t)return this.toCSS("rgba","1").replace(/\s+/g,"");if(1>this._alpha)return this.toCSS("rgba",this._alpha).replace(/\s+/g,"");var r=parseInt(this._color,10).toString(16);if(this.error)return"";if(r.length<6)for(var a=6-r.length-1;a>=0;a--)r="0"+r;return"#"+r},t(document).ready(function(t){t(".sinatra-color-control").each(function(){var e,n,o,l,c,s,d,u;e=t(this),n=e.val().replace(/\s+/g,""),o=e.attr("data-show-opacity"),l=e.attr("data-default-color"),c={change:function(t,a){var i,n;i=a.color.toString(),e.val(i),l==i&&(n=r(i),d.find(".ui-slider-handle").text(n)),s.find(".transparency").css("background-color",a.color.toString("no-alpha")),e.trigger("color-updated")},palettes:sinatra_customizer_localized.color_palette},e.wpColorPicker(c),s=e.parents(".wp-picker-container:first"),"true"==o&&t('<div class="alpha-color-picker-container"><div class="min-click-zone click-zone"></div><div class="max-click-zone click-zone"></div><div class="alpha-slider"></div><div class="transparency"></div></div>').appendTo(s.find(".wp-picker-holder")),d=s.find(".alpha-slider"),u={create:function(r,a){var i=t(this).slider("value");t(this).find(".ui-slider-handle").text(i),t(this).siblings(".transparency ").css("background-color",n)},value:r(n),range:"max",step:1,min:0,max:100,animate:300},d.slider(u),"true"==o&&d.find(".ui-slider-handle").addClass("show-opacity"),s.find(".min-click-zone").on("click",function(){a(0,e,d,!0)}),s.find(".max-click-zone").on("click",function(){a(100,e,d,!0)}),s.find(".iris-palette").on("click",function(a){var n,o;a.preventDefault(),i(o=r(n=t(this).css("background-color")),d),100!=o&&(n=n.replace(/[^,]+(?=\))/,(o/100).toFixed(2))),e.val(n),e.wpColorPicker("color",n)}),s.find(".button.wp-picker-clear").on("click",function(t){t.preventDefault(),e.val(""),i(100,d),e.trigger("color-updated")}),s.find(".button.wp-picker-default").on("click",function(t){t.preventDefault(),i(r(l),d)}),e.on("input",function(a){a.preventDefault(),i(r(t(this).val()),d),e.trigger("color-updated")}),d.slider().on("slide",function(r,i){a(parseFloat(i.value)/100,e,d,!1),t(this).find(".ui-slider-handle").text(i.value)}),t(".iris-picker, .sinatra-color-control").on("click",function(t){t.preventDefault()})})})}(jQuery);