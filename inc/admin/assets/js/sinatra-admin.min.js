!function(n){"use strict";var t={init:function(){n(document).ready(t.ready),n(window).on("load",t.load),t.bindUIActions(),n(document).trigger("sinatraReady")},ready:function(){},load:function(){window.dispatchEvent(new Event("resize"))},resize:function(){},bindUIActions:function(){var a,i=n("#wpwrap");n("body");i.on("click",".plugins .si-btn:not(.active)",function(s){s.preventDefault(),i.find(".plugins .si-btn.in-progress").length||(a=n(this),t.pluginAction(a))}),n(document).on("wp-plugin-install-success",t.pluginInstallSuccess),n(document).on("wp-plugin-install-error",t.pluginInstallError)},pluginAction:function(t){if(t.addClass("in-progress").attr("disabled","disabled").html(sinatra_strings.texts[t.data("action")+"-inprogress"]),"install"===t.data("action"))wp.updates.shouldRequestFilesystemCredentials&&!wp.updates.ajaxLocked&&(wp.updates.requestFilesystemCredentials(event),n(document).on("credential-modal-cancel",function(){t.removeAttr("disabled").removeClass("in-progress").html(sinatra_strings.texts.install),wp.a11y.speak(wp.updates.l10n.updateCancel,"polite")})),wp.updates.installPlugin({slug:t.data("plugin")});else{var a={_ajax_nonce:sinatra_strings.wpnonce,plugin:t.data("plugin"),action:"sinatra-plugin-"+t.data("action")};n.post(sinatra_strings.ajaxurl,a,function(a){a.success?t.data("redirect")?window.location.href=t.data("redirect"):location.reload():n(".plugins .si-btn.in-progress").removeAttr("disabled").removeClass("in-progress primary").addClass("secondary").html(sinatra_strings.texts.retry)})}},pluginInstallSuccess:function(a,i){a.preventDefault();var s,e=jQuery(a.target).data("init");s=void 0===e?i.slug:e;var r=n('.plugins a[data-plugin="'+s+'"]');r.data("action","activate"),t.pluginAction(r)},pluginInstallError:function(t,a){t.preventDefault();var i,s=jQuery(t.target).data("init");i=void 0===s?a.slug:s,n('.plugins a[data-plugin="'+i+'"]').attr("disabled","disabled").removeClass("in-progress primary").addClass("secondary").html(wp.updates.l10n.installFailedShort)}};t.init(),window.sinatraadmin=t}(jQuery);